---
controller_credentials:
  # Gitlab credential
  - name: "{{ aap_naming_credentials }}-gitlab_cred" # to modify but keep {{ aap_naming_credentials }}
    organization: "{{ user_organizations }}"
    state: present
    credential_type: Source Control
    inputs:
      username: "{{ hv_gitlab_user }}"
      password: "{{ hv_gitlab_pass }}"
      # ssh_key_data: "{{ hv_git_ssh }}"
      # ssh_key_unlock: "{{ hv_git_passphrase }}"

  # HashiCorp Credential Type
#   - name: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-HASHI-example"
#     credential_type: CRT-CAGIP-HASHICORP-DEV-coffre     # nom fixe Ã  conserver
#     organization: "{{ user_organizations }}"
#     description: ''
#     inputs:
#       vault_addr: "{{ hashi_vault_addr }}"               # this variable is filled during the Conf As Code pocess
#       vault_base_path: path_to_modify
#       vault_role_id: "{{ hashicorp_vault_role_id }}"     # this variable is filled during the Conf As Code pocess
#       vault_secret_id: "{{ hashicorp_vault_secret_id }}" # this variable is filled during the Conf As Code pocess
#     state: present

#   # Hashicorp lookup credential
#   - name: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-lookup-cred-input-hashi" # to modify but keep {{ aap_naming_credentials }}
#     organization: "{{ user_organizations }}"
#     state: present
#     credential_type: HashiCorp Vault Secret Lookup
#     inputs:
#       url: "{{ hashi_vault_addr }}"                # this variable is filled during the Conf As Code pocess
#       role_id: "{{ hashicorp_vault_role_id }}"     # this variable is filled during the Conf As Code pocess
#       secret_id: "{{ hashicorp_vault_secret_id }}" # this variable is filled during the Conf As Code pocess
#       default_auth_path: approle
#       api_version:

#   # Credential Machine using previous Hashicorp lookup credential secret
#   - name: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-receive-machine-hashi"
#     organization: "{{ user_organizations }}"
#     state: present
#     credential_type: Machine

#   # CyberArk CPP lookup credential
#   - name: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-lookup-cred-input-cyberark-ccp"
#     organization: "{{ user_organizations }}"
#     state: present
#     inputs:
#       url: "{{ hv_ccp_url }}"
#       app_id: "{{ hv_ccp_appid }}"
#       client_key: "{{ hv_ccp_priv_key }}"
#       client_cert: "{{ hv_ccp_cert }}"
#     credential_type: CyberArk Central Credential Provider Lookup

#   # Credential Machine using previous CyberArk lookup credential secret
#   - name: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-receive-machine-cyberark-ccp"
#     organization: "{{ user_organizations }}"
#     inputs:
#       username: user_machine
#     state: present
#     credential_type: Machine

# controller_credential_input_sources:
# # FIELD PASSWORD WITH HASHICORP
#   - source_credential: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-lookup-cred-input-hashi"
#     target_credential: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-receive-machine-hashi"
#     input_field_name: password
#     metadata:
#       secret_key: password
#       secret_path: /secret/data/cagip/XXXXX/tradi/qualif-intranet/YYY # bien conserver /secret/data/...
#     description: ajout du password recuperer de Hashicorp

# # FIELD USERNAME WITH HASHICORP
#   - source_credential: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-lookup-cred-input-hashi"
#     target_credential: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-receive-machine-hashi"
#     input_field_name: username
#     metadata:
#       secret_key: username
#       secret_path: /secret/data/cagip/XXXXX/tradi/qualif-intranet/YYY # bien conserver /secret/data/...
#     description: ajout du username recuperer de Hashicorp

# # FIELD PASSWORD WITH CyberArk CCP
#   - source_credential: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-lookup-cred-input-cyberark-ccp"
#     target_credential: "{{ aap_naming_credentials }}-{{ aap_objects_suffix_description }}-receive-machine-cyberark-ccp"
#     input_field_name: password
#     metadata:
#       object_query: Safe=my_safe;Object=my_object
#       object_query_format: Exact
#     description: ajout du password recuperer de Hashicorp
